<section class="flex justify-center">
  <div class="mt-5 w-[50%] p-4 border rounded border-gray-300 shadow-md">
    <h1 class="text-3xl text-center font-bold pb-4 border-b border-gray-200">
      New Post
    </h1>
    <app-thread-display
      [title]="threadData!.title"
      [type]="'thread-page'"
      [threadImage]="threadData?.threadImage"
    />

    <form [formGroup]="postForm" (ngSubmit)="postFormSubmit()">
      <div class="mb-4 flex flex-col gap-1">
        <label class="font-bold text-gray-700 mr-4">Title</label>
        <input
          type="text"
          name="title"
          id="title"
          formControlName="title"
          required
          class="rounded border border-gray-400 p-2"
        />
      </div>
      <!-- <div class="mb-4 flex flex-col gap-1">
                <label class="font-bold text-gray-700 mr-4">Picture</label>
                <input type="file" name="image" id="image" formControlName="image" required class=" rounded border border-gray-300 p-2" (change)="onFileChange($event)"/>
            </div> -->
      <!-- Display image preview -->
      <!-- <h3>Image Preview:</h3>
            <div class="border rounded w-[100px] h-[100px]">
                @if(imagePreview){
                <img [src]="imagePreview" alt="Image Preview" class="w-full h-full"/>
                }
            </div> -->

      <div class="mb-4 flex flex-col gap-1 w-full">
        <!-- <input type="text" name="textContent" id="textContent" formControlName="textContent" required class=" rounded border border-gray-300 p-2" placeholder="Type your post content in here..."/> -->
        <label class="font-bold text-gray-700 mr-4">Post Content</label>
        <textarea
          type="text"
          name="textContent"
          id="textContent"
          formControlName="textContent"
          required
          class="rounded border border-gray-400 p-2"
          placeholder="Type your post content in here..."
          rows="4"
        ></textarea>
      </div>

      @if(threadData?.tags!.length > 0) {
      <div class="mb-4 rounded p-2">
        @if(tagMessageFlag){
        <h4 class="text-red-800">
          You can only use one tag per post ! Remove existing tag, to add a new
          one.
        </h4>
        }
        <h4 class="font-bold text-gray-700 mb-1">Tags</h4>
        <div class="flex gap-3 mb-2">
          <div
            *ngFor="let tag of threadData?.tags"
            class="flex items-center gap-1 p-1 rounded-xl border border-gray-200 bg-orange-400 hover:cursor-pointer"
            (click)="addTag(tag)"
          >
            <h4 class="font-semibold text-white">{{ tag }}</h4>
            <i class="bi bi-plus text-2xl text-white"></i>
          </div>
        </div>
        <h4 class="font-bold text-gray-700 mb-2">Tag Added:</h4>
        <div
          class="rounded-xl hover:cursor-pointer"
          id="tag-selected-div"
          (click)="removeTag()"
        ></div>
      </div>
      }

      <div
        class="flex items-center justify-center mt-4 pt-4 border-t border-gray-300"
      >
        <button
          type="submit"
          class="p-2 rounded hover:cursor-pointer hover:scale-105 text-white text-xl font-bold bg-orange-500 text-center"
        >
          Submit
        </button>
      </div>
    </form>
  </div>
</section>
